#!/bin/bash
# Script de monitoring Unmute

echo "=== Status Unmute $(date) ==="

echo "ğŸ–¥ï¸ GPU Status:"
nvidia-smi --query-gpu=name,temperature.gpu,utilization.gpu,memory.used,memory.total --format=csv,noheader,nounits 2>/dev/null || echo "GPU non disponible"

echo -e "\nğŸ³ Docker Status:"
docker-compose -f {{ project_directory }}/docker-compose.production.yml ps

echo -e "\nğŸ’¾ Disk Usage:"
df -h /

echo -e "\nğŸ”§ Memory Usage:"
free -h

echo -e "\nğŸ“¡ Network Tests:"
curl -s http://localhost:{{ unmute_frontend_port }} > /dev/null && echo "Frontend ({{ unmute_frontend_port }}): âœ… OK" || echo "Frontend ({{ unmute_frontend_port }}): âŒ KO"
curl -s http://localhost:{{ unmute_backend_port }}/health > /dev/null && echo "Backend ({{ unmute_backend_port }}): âœ… OK" || echo "Backend ({{ unmute_backend_port }}): âŒ KO"

echo -e "\nğŸ“Š Container Logs (derniÃ¨res 10 lignes):"
docker-compose -f {{ project_directory }}/docker-compose.production.yml logs --tail=10
